<!DOCTYPE html>
<html>
<head>
    <style>
        
body {
    margin: 0;
    font-family: Arial, sans-serif;
}

.container {
    display: flex;
    flex-direction: column;
}

.right-side, .left-side-box {
    width: 100%;
}


.data {
    display: flex; 
    order: 2; 
}

.left-side {
    flex: 1;
    width: 100%; 
    display: flex;
    flex-direction: column;
    align-items: flex-start;
}

.checkbox-container {
    display: flex;
    align-items: center;
    margin-bottom: 10px;
    justify-content: flex-start;
}

.checkbox {
    margin-right: 10px;
}



.filters {
    width: 100%; 
    order: 1; 
    border: 1px solid #e0e0e0;
    border-radius: 4px;
    padding: 20px;
    background-color: #f8f8f8;
    margin-bottom: 20px;
}

.filter-title {
    font-size: 18px;
    font-weight: bold;
    margin-bottom: 10px;
}

.filter-item {
    display: flex;
    align-items: center;
    margin-bottom: 10px;
}

.filter-checkbox {
    margin-right: 10px;
}

.submit-button {
    padding: 10px 20px;
    font-size: 16px;
    font-weight: bold;
    text-align: center;
    color: #ffffff;
    background-color: #4caf50;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}
.calendar-dropdown {
    position: relative;
    display: inline-block;
}

.calendar-dropdown select {
    padding: 5px;
}


.right-side-box {
    flex: 1;
    padding: 10px;
}

.left-side-box {
            flex: 1;
            padding: 10px;
            border-right: 1px solid #ccc;
            overflow-y: auto; /* Add scroll if needed */
        }
    
    </style>
</head>




<body>
    <div class="container">
        
        <div class="right-side">
            <div class="filters">
                <div class="filter-title">Insights As a Service UI</div>
                <div class="filter-item">
                    <label for="state-filter">Filter by State:  </label>
                    <select id="state-filter">
                        <option value="all">All States</option>
                        <option value="AL">Alabama</option>
                        <option value="AK">Alaska</option>
                        <option value="AZ">Arizona</option>
                        <option value="AR">Arkansas</option>
                        <option value="CA">California</option>
                        <option value="CO">Colorado</option>
                        <option value="CT">Connecticut</option>
                        <option value="DE">Delaware</option>
                        <option value="FL">Florida</option>
                        <option value="GA">Georgia</option>
                        <option value="HI">Hawaii</option>
                        <option value="ID">Idaho</option>
                        <option value="IL">Illinois</option>
                        <option value="IN">Indiana</option>
                        <option value="IA">Iowa</option>
                        <option value="KS">Kansas</option>
                        <option value="KY">Kentucky</option>
                        <option value="LA">Louisiana</option>
                        <option value="ME">Maine</option>
                        <option value="MD">Maryland</option>
                        <option value="MA">Massachusetts</option>
                        <option value="MI">Michigan</option>
                        <option value="MN">Minnesota</option>
                        <option value="MS">Mississippi</option>
                        <option value="MO">Missouri</option>
                        <option value="MT">Montana</option>
                        <option value="NE">Nebraska</option>
                        <option value="NV">Nevada</option>
                        <option value="NH">New Hampshire</option>
                        <option value="NJ">New Jersey</option>
                        <option value="NM">New Mexico</option>
                        <option value="NY">New York</option>
                        <option value="NC">North Carolina</option>
                        <option value="ND">North Dakota</option>
                        <option value="OH">Ohio</option>
                        <option value="OK">Oklahoma</option>
                        <option value="OR">Oregon</option>
                        <option value="PA">Pennsylvania</option>
                        <option value="RI">Rhode Island</option>
                        <option value="SC">South Carolina</option>
                        <option value="SD">South Dakota</option>
                        <option value="TN">Tennessee</option>
                        <option value="TX">Texas</option>
                        <option value="UT">Utah</option>
                        <option value="VT">Vermont</option>
                        <option value="VA">Virginia</option>
                        <option value="WA">Washington</option>
                        <option value="WV">West Virginia</option>
                        <option value="WI">Wisconsin</option>
                        <option value="WY">Wyoming</option>
                    </select>
                </div>
                <div class="filter-item">
                    <label for="container-filter">Filter by specific Module:  </label>
                    <select id="container-filter">
                        <option value="option1">none</option>
                        <option value="option2">Option 2</option>
                        <option value="option3">Option 3</option>
                    </select>
                </div>
                <div class="filter-item">
                    <label for="clustering-filter">Filter by Clustering Parameter:  </label>
                    <select id="clustering-filter">
                        <option value="option1">none</option>
                        <option value="option2">Option 2</option>
                        <option value="option3">Option 3</option>
                    </select>
                </div>
                <div class="filter-item">
                    <label>Filter by Month and Year:  </label>
                    <div class="calendar-dropdown">
                        <select>
                            <option value="0">none</option>
                            <option value="1">January</option>
                            <option value="2">February</option>
                            <option value="3">March</option>
                            <option value="4">April</option>
                            <option value="5">May</option>
                            <option value="6">June</option>
                            <option value="7">July</option>
                            <option value="8">August</option>
                            <option value="9">September</option>
                            <option value="10">October</option>
                            <option value="11">November</option>
                            <option value="12">December</option>
                        </select>
                        <select>
                            <option value="0">none</option>
                            <!-- Generate years from 2000 to current year -->
                            <script>
                                const currentYear = new Date().getFullYear();
                                for (let year = 1950; year <= currentYear; year++) {
                                    document.write(`<option value="${year}">${year}</option>`);
                                }
                            </script>
                        </select>
                    </div>
                </div>
                <button id="submit-button" class="submit-button">Apply Filter</button>
            </div>

            <script>
                document.addEventListener("DOMContentLoaded", function () {
                    // Get references to the filter elements
                    const stateFilter = document.getElementById("state-filter");
                    const containerFilter = document.getElementById("container-filter");
                    const clusteringFilter = document.getElementById("clustering-filter");
                    const monthFilter = document.querySelectorAll(".calendar-dropdown select")[0];
                    const yearFilter = document.querySelectorAll(".calendar-dropdown select")[1];
                    const submitButton = document.getElementById("submit-button");
                
                    // Add event listener to the submit button
                    submitButton.addEventListener("click", function () {
                        // Collect selected values from filters
                        const selectedState = stateFilter.value;
                        const selectedContainer = containerFilter.value;
                        const selectedClustering = clusteringFilter.value;
                        const selectedMonth = monthFilter.value;
                        const selectedYear = yearFilter.value;
                
                        // object to store filter details
                        const filterDetails = {
                            state: selectedState,
                            container: selectedContainer,
                            clustering: selectedClustering,
                            month: selectedMonth,
                            year: selectedYear
                        };
                
                        // sending the filter details to the Flask API by fetch
                        fetch("/submit_filters", {
                            method: "POST",
                            headers: {
                                "Content-Type": "application/json"
                            },
                            body: JSON.stringify(filterDetails)
                        })
                        .then(response => response.json())
                        .then(data => {
                            console.log("Response from Flask API:", data);
                            // response
                        })
                        .catch(error => {
                            console.error("Error sending filter details:", error);
                            // err
                        });
                    });
                });
                </script>  
                
                <div class="left-side-box">
                    <div class="left-side" id="leftSide">
                        <!-- Entries will be populated here -->
                    </div>
                </div>
    
            
                
    
                
    
    
                <script>
                    // Fetch entries from the Flask API and populate checkboxes
                    fetch('/get_entries')
                        .then(response => response.json())
                        .then(entries => {
                            const leftSide = document.getElementById('leftSide');
                            entries.forEach(entry => {
                                const checkboxContainer = document.createElement('div');
                                checkboxContainer.className = 'checkbox-container';
                                const checkbox = document.createElement('input');
                                checkbox.type = 'checkbox';
                                checkbox.className = 'checkbox';
                                const label = document.createElement('label');
                                label.textContent = entry; // Use the entry string directly
                                checkboxContainer.appendChild(checkbox);
                                checkboxContainer.appendChild(label);
                                leftSide.appendChild(checkboxContainer);
                            });
                
                            // Add a submit button to the left side
                            const submitButton = document.createElement('button');
                            submitButton.textContent = 'Submit Selected Queries';
                            submitButton.className = 'submit-button';
                            leftSide.appendChild(submitButton);
    
    
    
    
                            // Add event listener to the submit button
                            submitButton.addEventListener('click', () => {
                                const selectedQueries = Array.from(document.querySelectorAll('.checkbox:checked'))
                                    .map(checkbox => checkbox.nextSibling.textContent); // Extract labels
                            
                                // Open the new page
                                const newWindow = window.open('/selected_queries', '_blank');
                                newWindow.addEventListener('DOMContentLoaded', () => {
                                    const ul = newWindow.document.querySelector('ul');
                                    selectedQueries.forEach(query => {
                                        const li = newWindow.document.createElement('li');
                                        li.textContent = query;
                                        ul.appendChild(li);
                                    });
                                });
                            });
                        })
                        .catch(error => console.error('Error fetching entries:', error));
                </script>
                

        </div>
    </div>

</body>
</html>


